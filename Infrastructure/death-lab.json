{
  "min_packer_version": "1.8.6",
  "description": "Creates Vagrant Box files for a Detection Engineering and Threat Hunting (DEATH) lab.",
  "builders": [
    {
      "name": "CentOS",
      "vm_name": "CentOS",
      "type": "virtualbox-iso",
      "output_directory": "Virtual-Machines/CentOS",
      "guest_os_type": "RedHat_64",
      "cpus": 2,
      "memory": 8192,
      "gfx_controller": "vmsvga",
      "gfx_vram_size": 128,
      "iso_url": "ISO-Files/CentOS-7-x86_64-DVD-2009.iso",
      "iso_checksum": "E33D7B1EA7A9E2F38C8F693215DD85254C3A4FE446F93F563279715B68D07987",
      "vboxmanage": [
        ["modifyvm", "{{.Name}}", "--ioapic", "on"],
        ["modifyvm", "{{.Name}}", "--mouse", "usbmultitouch"],
        ["storagectl", "{{.Name}}", "--name", "Floppy", "--add", "floppy"]
      ],
      "http_directory": "Configuration-Files",
      "http_bind_address": "192.168.56.1",
      "boot_command": [ 
        "<up><tab> inst.ks=http://192.168.56.1:{{ .HTTPPort }}/ks.cfg<enter>",
        "<wait><wait><wait><wait><wait><enter>"
      ],
      "communicator": "ssh",
      "ssh_username": "vagrant",
      "ssh_password": "vagrant",
      "ssh_timeout": "15m",
      "shutdown_command": "echo 'vagrant' | sudo -S systemctl poweroff"
    }
  ],
  "post-processors": [
    {
      "only": ["CentOS"],
      "type": "vagrant",
      "output": "Vagrant-Boxes/CentOS.box",
      "keep_input_artifact": false
    }
  ]
} 
